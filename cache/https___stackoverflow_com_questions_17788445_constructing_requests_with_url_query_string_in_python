{"success":true,"status":"completed","completed":2,"total":2,"creditsUsed":2,"expiresAt":"2025-03-05T21:28:37.000Z","data":[{"markdown":" \n\n##### Collectives™ on Stack Overflow\n\nFind centralized, trusted content and collaborate around the technologies you use most.\n\n[Learn more about Collectives](https://stackoverflow.com/collectives)\n\n**Teams**\n\nQ&A for work\n\nConnect and share knowledge within a single location that is structured and easy to search.\n\n[Learn more about Teams](https://stackoverflow.co/teams/)\n\nGet early access and see previews of new features.\n\n[Learn more about Labs](https://stackoverflow.co/labs/)\n\n[Constructing requests with URL Query String in Python](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python)\n\n============================================================================================================================================================\n\n[Ask Question](https://stackoverflow.com/questions/ask)\n\nAsked 11 years, 7 months ago\n\nModified [11 years, 7 months ago](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity \"2013-07-22 23:59:57Z\")\n\nViewed 135k times\n\nThis question shows research effort; it is useful and clear\n\n41\n\nSave this question.\n\n[](https://stackoverflow.com/posts/17788445/timeline)\n\nShow activity on this post.\n\nI'm not really sure what I'm doing. Should I be using a library for this? Or do it manually?\n\nSo I'm trying to do some work with the WiThings ([http://www.withings.com/api](http://www.withings.com/api)\n) API in Python.\n\nIn order to perform some of the requests, OAuth authentication is required. I have gone through using the requests library and obtained an oauth token and secret token, alongside my consumer and consumer secret tokens.\n\nNow I am at the point of having to make requests, and I am running into some problems. The format for the request I need to make is as follows (an example from their API):\n\n    http://wbsapi.withings.net/notify?action=subscribe\n    &callbackurl=http%3a%2f%2fwww.yourdomain.net%2fyourCustomApplication.php\n    &comment=Your%20Own%20Application%20Description\n    &oauth_consumer_key=c331c571585e7c518c78656f41582e96fc1c2b926cf77648223dd76424b52b\n    &oauth_nonce=accbac1b7ee2b86b828e6dc4a5a539b2\n    &oauth_signature=XfobZMboIg2cRyNKAvyzONHHnKM%3D\n    &oauth_signature_method=HMAC-SHA1\n    &oauth_timestamp=1311842514\n    &oauth_token=887557411788d5120537c6550fbf2df68921f8dd6f8c7e7f9b441941eb10\n    &oauth_version=1.0\n    &userid=831\n    \n\nAs far as I can tell, this is pretty much a typical format with OAuth, except for the userid at the end.\n\nSo, is it possible for me to make a request like this using the requests library? Or some other library? How do I get the URL right, with the comment and userid and callbackurl fields? Or do I need to generate this URL manually? If that's the case, whats the best way for going about doing this?\n\nAny assistance is greatly appreciated, as I've been stuck on this for a while.\n\n**EDIT**\n\nSo, for some clarification, I understand about 98% of the code I am being referred to. I am only having a little problem at the end.\n\nSo here I am, with the following code:\n\n    from __future__ import unicode_literals\n    from urlparse import parse_qs\n    import requests\n    from requests_oauthlib import OAuth1Session\n    \n    consumer_key = '**Valid consumer key**'\n    \n    consumer_secret = '**Valid consumer secret**'\n    \n    \n    oauth_key = '**Valid oauth key obtained through requests library and OAuth workflow**'\n    \n    oauth_secret ='**Valid oauth secret obtained through requests library and OAuth workflow**'\n    \n    verifier = '**Valid consumer key obtained through requests library and OAuth workflow**'\n    \n    base_url = 'http://wbsapi.withings.net/notify'\n    \n    params = {\n    'action': 'subscribe',\n    'callbackurl': '**callback URL**',\n    'comment': '**comment**',\n    'oauth_consumer_key': '**consumer_key**',\n    'oauth_nonce': 'etc etc',\n    'oauth_signature' : '' # <-------------- Where do I get this\n    # etc etc... I have everything else\n    }\n    r = requests.get(\"http://wbsapi.withings.net/notify\", params=params)\n    \n\nThis is all I need. I have everything I need but the signature. Is there a way I can get the signature from the oauth libraries? This is all that has been holding me up.\n\n*   [python](https://stackoverflow.com/questions/tagged/python \"show questions tagged 'python'\")\n    \n*   [api](https://stackoverflow.com/questions/tagged/api \"show questions tagged 'api'\")\n    \n*   [oauth](https://stackoverflow.com/questions/tagged/oauth \"show questions tagged 'oauth'\")\n    \n*   [request](https://stackoverflow.com/questions/tagged/request \"show questions tagged 'request'\")\n    \n\n[Share](https://stackoverflow.com/q/17788445 \"Short permalink to this question\")\n\nShare a link to this question\n\nCopy link[CC BY-SA 3.0](https://creativecommons.org/licenses/by-sa/3.0/ \"The current license for this post: CC BY-SA 3.0\")\n\n[Improve this question](https://stackoverflow.com/posts/17788445/edit)\n\nFollow \n\nFollow this question to receive notifications\n\n[edited Jul 22, 2013 at 14:21](https://stackoverflow.com/posts/17788445/revisions \"show all edits to this post\")\n\nelykl33t\n\nasked Jul 22, 2013 at 13:07\n\n[![elykl33t's user avatar](https://www.gravatar.com/avatar/9935cbe4fbc8e718da2170bbceffb3ac?s=64&d=identicon&r=PG)](https://stackoverflow.com/users/1596332/elykl33t)\n\n[elykl33t](https://stackoverflow.com/users/1596332/elykl33t)\nelykl33t\n\n99766 gold badges1111 silver badges2525 bronze badges\n\n6\n\n*   Have you seen [requests-oauthlib.readthedocs.org/en/latest](https://requests-oauthlib.readthedocs.org/en/latest/)\n     yet?\n    \n    – [Martijn Pieters](https://stackoverflow.com/users/100297/martijn-pieters \"1,124,378 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:12](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python#comment25948413_17788445)\n    \n*   Yes, but I couldn't figure out from the documentation exactly how I would construct the request when something needs to be put at the end of the URL, in this case userid.\n    \n    – [elykl33t](https://stackoverflow.com/users/1596332/elykl33t \"997 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:22](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python#comment25948801_17788445)\n    \n*   I see [support for extra information](https://requests-oauthlib.readthedocs.org/en/latest/oauth2_workflow.html#all-define-the-token-token-saver-and-needed-credentials)\n     in the documentation.\n    \n    – [Martijn Pieters](https://stackoverflow.com/users/100297/martijn-pieters \"1,124,378 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:29](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python#comment25949065_17788445)\n    \n*   The thing at the end of the URL is called query string :)\n    \n    – [woozyking](https://stackoverflow.com/users/158111/woozyking \"5,220 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:33](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python#comment25949218_17788445)\n    \n*   Does \"OAuth 2\" refer to the OAuth version? If so, WiThings is version 1.\n    \n    – [elykl33t](https://stackoverflow.com/users/1596332/elykl33t \"997 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:34](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python#comment25949241_17788445)\n    \n\n[](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python# \"Use comments to ask for more information or suggest improvements. Avoid answering questions in comments.\")\n |  [Show **1** more comment](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python# \"Expand to show all comments on this post\")\n\n2 Answers 2\n-----------\n\nSorted by: [Reset to default](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?answertab=scoredesc#tab-top)\n\nHighest score (default) Trending (recent votes count more) Date modified (newest first) Date created (oldest first)\n\nThis answer is useful\n\n73\n\nSave this answer.\n\n[](https://stackoverflow.com/posts/17788913/timeline)\n\nShow activity on this post.\n\nTo perform `GET` requests with URL query string:\n\n    import requests\n    \n    params = {\n        'action': 'subscribe',\n        'callbackurl': '',\n        'comment': '',\n        'oauth_consumer_key': '',\n        'oauth_nonce': '',\n        # more key=value pairs as appeared in your query string\n    }\n    r = requests.get(\"http://wbsapi.withings.net/notify\", params=params)\n    \n\nWith that cleared, now you just need to follow the workflow documented on [http://www.withings.com/en/api/oauthguide](http://www.withings.com/en/api/oauthguide)\n and implement them\n\n1.  Upon receiving your OAuth Key and OAuth Secret, perform a `GET` request with the following endpoint and **query string** which will give you back `token`:\n    \n    > [https://oauth.withings.com/account/request\\_token](https://oauth.withings.com/account/request_token)\n    > ? oauth\\_callback=http%3A%2F%2Fexample.com%2Fget\\_access\\_token &oauth\\_consumer\\_key=c331c571585e7c518c78656f41582e96fc1c2b926cf77648223dd76424b52b &oauth\\_nonce=f71972b1fa93b8935ccaf34ee02d7657 &oauth\\_signature=J8xzgFtHTsSRw8Ejc8UDV2jls34%3D &oauth\\_signature\\_method=HMAC-SHA1 &oauth\\_timestamp=1311778988 &oauth\\_version=1.0\n    \n2.  Then you need to **authorize** the token you received with the following request which will give you the **user\\_id**:\n    \n    > [https://oauth.withings.com/account/authorize](https://oauth.withings.com/account/authorize)\n    > ? oauth\\_callback=http%3A%2F%2Fexample.com%2Fget\\_access\\_token &oauth\\_consumer\\_key=c331c571585e7c518c78656f41582e96fc1c2b926cf77648223dd76424b52b &oauth\\_nonce=369f9ceb2f285ac637c9a7e9e98019bd &oauth\\_signature=OR9J9iEl%2F2yGOXP2wk5c2%2BWtYvU%3D &oauth\\_signature\\_method=HMAC-SHA1 &oauth\\_timestamp=1311778988 &oauth\\_token=5bb105d2292ff43ec9c0f633fee9033045ed4643e9871b80ce586dc1bf945 &oauth\\_version=1.0\n    \n3.  Then you need to request the `access_token` by hitting this endpoint with some more **query string**:\n    \n    > [https://oauth.withings.com/account/access\\_token](https://oauth.withings.com/account/access_token)\n    > ? oauth\\_consumer\\_key=c331c571585e7c518c78656f41582e96fc1c2b926cf77648223dd76424b52b &oauth\\_nonce=7acd22371fc56fd8a0aaf8416f79f84f &oauth\\_signature=jmj1g%2FB3rYR2DCpWp86jB5YVHIM%3D &oauth\\_signature\\_method=HMAC-SHA1 &oauth\\_timestamp=1311778988 &oauth\\_token=5bb105d2292ff43ec9c0f633fee9033045ed4643e9871b80ce586dc1bf945 &oauth\\_version=1.0 &userid=831\n    \n4.  Now you have everything needed to perform the aforementioned request in your question, and others, example directly from the documentation:\n    \n    > [http://wbsapi.withings.com/measure](http://wbsapi.withings.com/measure)\n    > ? action=getmeas &oauth\\_consumer\\_key=c331c571585e7c518c78656f41582e96fc1c2b926cf77648223dd76424b52b &oauth\\_nonce=accbac1b7ee2b86b828e6dc4a5a539b2 &oauth\\_signature=XfobZMboIg2cRyNKAvyzONHHnKM%3D &oauth\\_signature\\_method=HMAC-SHA1 &oauth\\_timestamp=1311842514 &oauth\\_token=887557411788d5120537c6550fbf2df68921f8dd6f8c7e7f9b441941eb10 &oauth\\_version=1.0 &userid=831\n    \n\nAgain, everything can be done without explicit `oauth` library as you can finish the workflow with `requests.get` and **query string** built from a `dict` feed into the `params` argument of the method.\n\nI truly hope this helps you achieve your goal.\n\n[Share](https://stackoverflow.com/a/17788913 \"Short permalink to this answer\")\n\nShare a link to this answer\n\nCopy link[CC BY-SA 3.0](https://creativecommons.org/licenses/by-sa/3.0/ \"The current license for this post: CC BY-SA 3.0\")\n\n[Improve this answer](https://stackoverflow.com/posts/17788913/edit)\n\nFollow \n\nFollow this answer to receive notifications\n\n[edited Jul 22, 2013 at 14:06](https://stackoverflow.com/posts/17788913/revisions \"show all edits to this post\")\n\nanswered Jul 22, 2013 at 13:30\n\n[![woozyking's user avatar](https://www.gravatar.com/avatar/ee2d82de8d2b8f9912d1d3ddd5a6dcb6?s=64&d=identicon&r=PG)](https://stackoverflow.com/users/158111/woozyking)\n\n[woozyking](https://stackoverflow.com/users/158111/woozyking)\nwoozyking\n\n5,22011 gold badge2424 silver badges3030 bronze badges\n\n7\n\n*   I had thought of this, the problem being I would have to manually generate the OAuth signature, which is a bit of a pain, and I am not sure if I could get it right.\n    \n    – [elykl33t](https://stackoverflow.com/users/1596332/elykl33t \"997 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:35](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python#comment25949281_17788913)\n    \n*   @elykl33t Then use `requests-oauthlib` to perform the signing procedure and obtain aforementioned parameters, then construct a `GET` request with **query string** as mentioned in my answer.\n    \n    – [woozyking](https://stackoverflow.com/users/158111/woozyking \"5,220 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:36](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python#comment25949310_17788913)\n    \n*   This is something I have thought about, but I was not sure how to do. How could I obtain the signature from the request? A big reason I am having issues with this is just because my Python experience is lacking.\n    \n    – [elykl33t](https://stackoverflow.com/users/1596332/elykl33t \"997 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:40](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python#comment25949495_17788913)\n    \n*   @elykl33t These are all clearly documented on WIthings API documentation: [withings.com/en/api/oauthguide](http://www.withings.com/en/api/oauthguide)\n    , starting from the section on \"How to get this permanent access ?\", then read through [requests-oauthlib.readthedocs.org/en/latest/…](https://requests-oauthlib.readthedocs.org/en/latest/oauth1_workflow.html#workflow-example-showing-use-of-both-oauth1-and-oauth1session)\n     on how to implement it using `requests-oauthlib`\n    \n    – [woozyking](https://stackoverflow.com/users/158111/woozyking \"5,220 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:45](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python#comment25949709_17788913)\n    \n*   Thanks for all the help, and sorry for all the questions, but in an OAuth1 session, is the rsa\\_key the signature?\n    \n    – [elykl33t](https://stackoverflow.com/users/1596332/elykl33t \"997 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:52](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python#comment25949989_17788913)\n    \n\n[](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python# \"Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”.\")\n |  [Show **2** more comments](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python# \"Expand to show all comments on this post\")\n\nThis answer is useful\n\n2\n\nSave this answer.\n\n[](https://stackoverflow.com/posts/17799394/timeline)\n\nShow activity on this post.\n\nHere's a working example using the [rauth client library](https://github.com/litl/rauth)\n. Full disclosure, I'm the original rauth author. Hope this helps:\n\n    from rauth import OAuth1Service\n    \n    withings = OAuth1Service(\n            name='withings',\n            consumer_key='fd5fe4002db502983fbd056fdf416941d83e15ecb68ee9eeb4978cb2370c',\n            consumer_secret='29dbc46056c530814c2debcf24c76ff42f6cc66d0e3e5cfdef1e166725c6f',\n            base_url='http://wbsapi.withings.net/notify',\n            request_token_url='https://oauth.withings.com/account/request_token',\n            authorize_url='http://oauth.withings.com/account/authorize',\n            access_token_url='https://oauth.withings.com/account/access_token')\n    \n    request_token, request_token_secret = withings.get_request_token()\n    \n    callback = 'https://github.com/litl/rauth'\n    \n    authorize_url = withings.get_authorize_url(request_token,\n                                               oauth_callback=callback)\n    \n    print('Visit this URL in your browser: {url}'.format(url=authorize_url))\n    userid = raw_input('Enter userid from browser URL: ')\n    \n    sess = withings.get_auth_session(request_token,\n                                     request_token_secret,\n                                     params={'userid': userid})\n    \n    print sess.get('measure', params={'action': 'getmeas',\n                                      'userid': userid}).json()\n    \n\n[Share](https://stackoverflow.com/a/17799394 \"Short permalink to this answer\")\n\nShare a link to this answer\n\nCopy link[CC BY-SA 3.0](https://creativecommons.org/licenses/by-sa/3.0/ \"The current license for this post: CC BY-SA 3.0\")\n\n[Improve this answer](https://stackoverflow.com/posts/17799394/edit)\n\nFollow \n\nFollow this answer to receive notifications\n\nanswered Jul 22, 2013 at 23:59\n\n[![maxcountryman's user avatar](https://i.sstatic.net/sq0X6.png?s=64)](https://stackoverflow.com/users/1542038/maxcountryman)\n\n[maxcountryman](https://stackoverflow.com/users/1542038/maxcountryman)\nmaxcountryman\n\n1,76955 gold badges2525 silver badges5555 bronze badges\n\n[Add a comment](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python# \"Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”.\")\n  | [](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python# \"Expand to show all comments on this post\")\n\n  \n\nYour Answer\n-----------\n\n**Reminder:** Answers generated by artificial intelligence tools are not allowed on Stack Overflow. [Learn more](https://stackoverflow.com/help/gen-ai-policy)\n\nDraft saved\n\nDraft discarded\n\n \n\n### Sign up or [log in](https://stackoverflow.com/users/login?ssrc=question_page&returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f17788445%2fconstructing-requests-with-url-query-string-in-python%23new-answer)\n\nSign up using Google\n\nSign up using Email and Password\n\n  Submit\n\n### Post as a guest\n\nName\n\nEmail\n\nRequired, but never shown\n\nPost Your Answer Discard\n\nBy clicking “Post Your Answer”, you agree to our [terms of service](https://stackoverflow.com/legal/terms-of-service/public)\n and acknowledge you have read our [privacy policy](https://stackoverflow.com/legal/privacy-policy)\n.\n\nNot the answer you're looking for? Browse other questions tagged\n\n*   [python](https://stackoverflow.com/questions/tagged/python \"show questions tagged 'python'\")\n    \n*   [api](https://stackoverflow.com/questions/tagged/api \"show questions tagged 'api'\")\n    \n*   [oauth](https://stackoverflow.com/questions/tagged/oauth \"show questions tagged 'oauth'\")\n    \n*   [request](https://stackoverflow.com/questions/tagged/request \"show questions tagged 'request'\")\n    \n\nor [ask your own question](https://stackoverflow.com/questions/ask)\n.\n\n\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nlang-py","metadata":{"twitter:description":"I'm not really sure what I'm doing. Should I be using a library for this? Or do it manually?\n\nSo I'm trying to do some work with the WiThings (http://www.withings.com/api) API in Python.\n\nIn order to ","og:url":"https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python","twitter:domain":"stackoverflow.com","ogSiteName":"Stack Overflow","og:site_name":"Stack Overflow","og:image":"https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded","title":"api - Constructing requests with URL Query String in Python - Stack Overflow","favicon":"https://cdn.sstatic.net/Sites/stackoverflow/Img/favicon.ico?v=ec617d715196","ogDescription":"I'm not really sure what I'm doing. Should I be using a library for this? Or do it manually?\n\nSo I'm trying to do some work with the WiThings (http://www.withings.com/api) API in Python.\n\nIn order to ","language":"en","ogUrl":"https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python","twitter:card":"summary","ogTitle":"Constructing requests with URL Query String in Python","ogImage":"https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded","viewport":"width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0","twitter:title":"Constructing requests with URL Query String in Python","og:type":"website","scrapeId":"9448b84e-cf0c-4b91-9868-b12b713e02a3","sourceURL":"https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python","url":"https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python","statusCode":200}},{"markdown":" \n\n##### Collectives™ on Stack Overflow\n\nFind centralized, trusted content and collaborate around the technologies you use most.\n\n[Learn more about Collectives](https://stackoverflow.com/collectives)\n\n**Teams**\n\nQ&A for work\n\nConnect and share knowledge within a single location that is structured and easy to search.\n\n[Learn more about Teams](https://stackoverflow.co/teams/)\n\nGet early access and see previews of new features.\n\n[Learn more about Labs](https://stackoverflow.co/labs/)\n\n[Constructing requests with URL Query String in Python](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python)\n\n============================================================================================================================================================\n\n[Ask Question](https://stackoverflow.com/questions/ask)\n\nAsked 11 years, 7 months ago\n\nModified [11 years, 7 months ago](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity \"2013-07-22 23:59:57Z\")\n\nViewed 135k times\n\nThis question shows research effort; it is useful and clear\n\n41\n\nSave this question.\n\n[](https://stackoverflow.com/posts/17788445/timeline)\n\nShow activity on this post.\n\nI'm not really sure what I'm doing. Should I be using a library for this? Or do it manually?\n\nSo I'm trying to do some work with the WiThings ([http://www.withings.com/api](http://www.withings.com/api)\n) API in Python.\n\nIn order to perform some of the requests, OAuth authentication is required. I have gone through using the requests library and obtained an oauth token and secret token, alongside my consumer and consumer secret tokens.\n\nNow I am at the point of having to make requests, and I am running into some problems. The format for the request I need to make is as follows (an example from their API):\n\n    http://wbsapi.withings.net/notify?action=subscribe\n    &callbackurl=http%3a%2f%2fwww.yourdomain.net%2fyourCustomApplication.php\n    &comment=Your%20Own%20Application%20Description\n    &oauth_consumer_key=c331c571585e7c518c78656f41582e96fc1c2b926cf77648223dd76424b52b\n    &oauth_nonce=accbac1b7ee2b86b828e6dc4a5a539b2\n    &oauth_signature=XfobZMboIg2cRyNKAvyzONHHnKM%3D\n    &oauth_signature_method=HMAC-SHA1\n    &oauth_timestamp=1311842514\n    &oauth_token=887557411788d5120537c6550fbf2df68921f8dd6f8c7e7f9b441941eb10\n    &oauth_version=1.0\n    &userid=831\n    \n\nAs far as I can tell, this is pretty much a typical format with OAuth, except for the userid at the end.\n\nSo, is it possible for me to make a request like this using the requests library? Or some other library? How do I get the URL right, with the comment and userid and callbackurl fields? Or do I need to generate this URL manually? If that's the case, whats the best way for going about doing this?\n\nAny assistance is greatly appreciated, as I've been stuck on this for a while.\n\n**EDIT**\n\nSo, for some clarification, I understand about 98% of the code I am being referred to. I am only having a little problem at the end.\n\nSo here I am, with the following code:\n\n    from __future__ import unicode_literals\n    from urlparse import parse_qs\n    import requests\n    from requests_oauthlib import OAuth1Session\n    \n    consumer_key = '**Valid consumer key**'\n    \n    consumer_secret = '**Valid consumer secret**'\n    \n    \n    oauth_key = '**Valid oauth key obtained through requests library and OAuth workflow**'\n    \n    oauth_secret ='**Valid oauth secret obtained through requests library and OAuth workflow**'\n    \n    verifier = '**Valid consumer key obtained through requests library and OAuth workflow**'\n    \n    base_url = 'http://wbsapi.withings.net/notify'\n    \n    params = {\n    'action': 'subscribe',\n    'callbackurl': '**callback URL**',\n    'comment': '**comment**',\n    'oauth_consumer_key': '**consumer_key**',\n    'oauth_nonce': 'etc etc',\n    'oauth_signature' : '' # <-------------- Where do I get this\n    # etc etc... I have everything else\n    }\n    r = requests.get(\"http://wbsapi.withings.net/notify\", params=params)\n    \n\nThis is all I need. I have everything I need but the signature. Is there a way I can get the signature from the oauth libraries? This is all that has been holding me up.\n\n*   [python](https://stackoverflow.com/questions/tagged/python \"show questions tagged 'python'\")\n    \n*   [api](https://stackoverflow.com/questions/tagged/api \"show questions tagged 'api'\")\n    \n*   [oauth](https://stackoverflow.com/questions/tagged/oauth \"show questions tagged 'oauth'\")\n    \n*   [request](https://stackoverflow.com/questions/tagged/request \"show questions tagged 'request'\")\n    \n\n[Share](https://stackoverflow.com/q/17788445 \"Short permalink to this question\")\n\nShare a link to this question\n\nCopy link[CC BY-SA 3.0](https://creativecommons.org/licenses/by-sa/3.0/ \"The current license for this post: CC BY-SA 3.0\")\n\n[Improve this question](https://stackoverflow.com/posts/17788445/edit)\n\nFollow \n\nFollow this question to receive notifications\n\n[edited Jul 22, 2013 at 14:21](https://stackoverflow.com/posts/17788445/revisions \"show all edits to this post\")\n\nelykl33t\n\nasked Jul 22, 2013 at 13:07\n\n[![elykl33t's user avatar](https://www.gravatar.com/avatar/9935cbe4fbc8e718da2170bbceffb3ac?s=64&d=identicon&r=PG)](https://stackoverflow.com/users/1596332/elykl33t)\n\n[elykl33t](https://stackoverflow.com/users/1596332/elykl33t)\nelykl33t\n\n99766 gold badges1111 silver badges2525 bronze badges\n\n6\n\n*   Have you seen [requests-oauthlib.readthedocs.org/en/latest](https://requests-oauthlib.readthedocs.org/en/latest/)\n     yet?\n    \n    – [Martijn Pieters](https://stackoverflow.com/users/100297/martijn-pieters \"1,124,378 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:12](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity#comment25948413_17788445)\n    \n*   Yes, but I couldn't figure out from the documentation exactly how I would construct the request when something needs to be put at the end of the URL, in this case userid.\n    \n    – [elykl33t](https://stackoverflow.com/users/1596332/elykl33t \"997 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:22](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity#comment25948801_17788445)\n    \n*   I see [support for extra information](https://requests-oauthlib.readthedocs.org/en/latest/oauth2_workflow.html#all-define-the-token-token-saver-and-needed-credentials)\n     in the documentation.\n    \n    – [Martijn Pieters](https://stackoverflow.com/users/100297/martijn-pieters \"1,124,378 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:29](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity#comment25949065_17788445)\n    \n*   The thing at the end of the URL is called query string :)\n    \n    – [woozyking](https://stackoverflow.com/users/158111/woozyking \"5,220 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:33](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity#comment25949218_17788445)\n    \n*   Does \"OAuth 2\" refer to the OAuth version? If so, WiThings is version 1.\n    \n    – [elykl33t](https://stackoverflow.com/users/1596332/elykl33t \"997 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:34](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity#comment25949241_17788445)\n    \n\n[](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity# \"Use comments to ask for more information or suggest improvements. Avoid answering questions in comments.\")\n |  [Show **1** more comment](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity# \"Expand to show all comments on this post\")\n\n2 Answers 2\n-----------\n\nSorted by: [Reset to default](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?answertab=scoredesc#tab-top)\n\nHighest score (default) Trending (recent votes count more) Date modified (newest first) Date created (oldest first)\n\nThis answer is useful\n\n73\n\nSave this answer.\n\n[](https://stackoverflow.com/posts/17788913/timeline)\n\nShow activity on this post.\n\nTo perform `GET` requests with URL query string:\n\n    import requests\n    \n    params = {\n        'action': 'subscribe',\n        'callbackurl': '',\n        'comment': '',\n        'oauth_consumer_key': '',\n        'oauth_nonce': '',\n        # more key=value pairs as appeared in your query string\n    }\n    r = requests.get(\"http://wbsapi.withings.net/notify\", params=params)\n    \n\nWith that cleared, now you just need to follow the workflow documented on [http://www.withings.com/en/api/oauthguide](http://www.withings.com/en/api/oauthguide)\n and implement them\n\n1.  Upon receiving your OAuth Key and OAuth Secret, perform a `GET` request with the following endpoint and **query string** which will give you back `token`:\n    \n    > [https://oauth.withings.com/account/request\\_token](https://oauth.withings.com/account/request_token)\n    > ? oauth\\_callback=http%3A%2F%2Fexample.com%2Fget\\_access\\_token &oauth\\_consumer\\_key=c331c571585e7c518c78656f41582e96fc1c2b926cf77648223dd76424b52b &oauth\\_nonce=f71972b1fa93b8935ccaf34ee02d7657 &oauth\\_signature=J8xzgFtHTsSRw8Ejc8UDV2jls34%3D &oauth\\_signature\\_method=HMAC-SHA1 &oauth\\_timestamp=1311778988 &oauth\\_version=1.0\n    \n2.  Then you need to **authorize** the token you received with the following request which will give you the **user\\_id**:\n    \n    > [https://oauth.withings.com/account/authorize](https://oauth.withings.com/account/authorize)\n    > ? oauth\\_callback=http%3A%2F%2Fexample.com%2Fget\\_access\\_token &oauth\\_consumer\\_key=c331c571585e7c518c78656f41582e96fc1c2b926cf77648223dd76424b52b &oauth\\_nonce=369f9ceb2f285ac637c9a7e9e98019bd &oauth\\_signature=OR9J9iEl%2F2yGOXP2wk5c2%2BWtYvU%3D &oauth\\_signature\\_method=HMAC-SHA1 &oauth\\_timestamp=1311778988 &oauth\\_token=5bb105d2292ff43ec9c0f633fee9033045ed4643e9871b80ce586dc1bf945 &oauth\\_version=1.0\n    \n3.  Then you need to request the `access_token` by hitting this endpoint with some more **query string**:\n    \n    > [https://oauth.withings.com/account/access\\_token](https://oauth.withings.com/account/access_token)\n    > ? oauth\\_consumer\\_key=c331c571585e7c518c78656f41582e96fc1c2b926cf77648223dd76424b52b &oauth\\_nonce=7acd22371fc56fd8a0aaf8416f79f84f &oauth\\_signature=jmj1g%2FB3rYR2DCpWp86jB5YVHIM%3D &oauth\\_signature\\_method=HMAC-SHA1 &oauth\\_timestamp=1311778988 &oauth\\_token=5bb105d2292ff43ec9c0f633fee9033045ed4643e9871b80ce586dc1bf945 &oauth\\_version=1.0 &userid=831\n    \n4.  Now you have everything needed to perform the aforementioned request in your question, and others, example directly from the documentation:\n    \n    > [http://wbsapi.withings.com/measure](http://wbsapi.withings.com/measure)\n    > ? action=getmeas &oauth\\_consumer\\_key=c331c571585e7c518c78656f41582e96fc1c2b926cf77648223dd76424b52b &oauth\\_nonce=accbac1b7ee2b86b828e6dc4a5a539b2 &oauth\\_signature=XfobZMboIg2cRyNKAvyzONHHnKM%3D &oauth\\_signature\\_method=HMAC-SHA1 &oauth\\_timestamp=1311842514 &oauth\\_token=887557411788d5120537c6550fbf2df68921f8dd6f8c7e7f9b441941eb10 &oauth\\_version=1.0 &userid=831\n    \n\nAgain, everything can be done without explicit `oauth` library as you can finish the workflow with `requests.get` and **query string** built from a `dict` feed into the `params` argument of the method.\n\nI truly hope this helps you achieve your goal.\n\n[Share](https://stackoverflow.com/a/17788913 \"Short permalink to this answer\")\n\nShare a link to this answer\n\nCopy link[CC BY-SA 3.0](https://creativecommons.org/licenses/by-sa/3.0/ \"The current license for this post: CC BY-SA 3.0\")\n\n[Improve this answer](https://stackoverflow.com/posts/17788913/edit)\n\nFollow \n\nFollow this answer to receive notifications\n\n[edited Jul 22, 2013 at 14:06](https://stackoverflow.com/posts/17788913/revisions \"show all edits to this post\")\n\nanswered Jul 22, 2013 at 13:30\n\n[![woozyking's user avatar](https://www.gravatar.com/avatar/ee2d82de8d2b8f9912d1d3ddd5a6dcb6?s=64&d=identicon&r=PG)](https://stackoverflow.com/users/158111/woozyking)\n\n[woozyking](https://stackoverflow.com/users/158111/woozyking)\nwoozyking\n\n5,22011 gold badge2424 silver badges3030 bronze badges\n\n7\n\n*   I had thought of this, the problem being I would have to manually generate the OAuth signature, which is a bit of a pain, and I am not sure if I could get it right.\n    \n    – [elykl33t](https://stackoverflow.com/users/1596332/elykl33t \"997 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:35](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity#comment25949281_17788913)\n    \n*   @elykl33t Then use `requests-oauthlib` to perform the signing procedure and obtain aforementioned parameters, then construct a `GET` request with **query string** as mentioned in my answer.\n    \n    – [woozyking](https://stackoverflow.com/users/158111/woozyking \"5,220 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:36](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity#comment25949310_17788913)\n    \n*   This is something I have thought about, but I was not sure how to do. How could I obtain the signature from the request? A big reason I am having issues with this is just because my Python experience is lacking.\n    \n    – [elykl33t](https://stackoverflow.com/users/1596332/elykl33t \"997 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:40](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity#comment25949495_17788913)\n    \n*   @elykl33t These are all clearly documented on WIthings API documentation: [withings.com/en/api/oauthguide](http://www.withings.com/en/api/oauthguide)\n    , starting from the section on \"How to get this permanent access ?\", then read through [requests-oauthlib.readthedocs.org/en/latest/…](https://requests-oauthlib.readthedocs.org/en/latest/oauth1_workflow.html#workflow-example-showing-use-of-both-oauth1-and-oauth1session)\n     on how to implement it using `requests-oauthlib`\n    \n    – [woozyking](https://stackoverflow.com/users/158111/woozyking \"5,220 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:45](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity#comment25949709_17788913)\n    \n*   Thanks for all the help, and sorry for all the questions, but in an OAuth1 session, is the rsa\\_key the signature?\n    \n    – [elykl33t](https://stackoverflow.com/users/1596332/elykl33t \"997 reputation\")\n    \n    [Commented Jul 22, 2013 at 13:52](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity#comment25949989_17788913)\n    \n\n[](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity# \"Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”.\")\n |  [Show **2** more comments](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity# \"Expand to show all comments on this post\")\n\nThis answer is useful\n\n2\n\nSave this answer.\n\n[](https://stackoverflow.com/posts/17799394/timeline)\n\nShow activity on this post.\n\nHere's a working example using the [rauth client library](https://github.com/litl/rauth)\n. Full disclosure, I'm the original rauth author. Hope this helps:\n\n    from rauth import OAuth1Service\n    \n    withings = OAuth1Service(\n            name='withings',\n            consumer_key='fd5fe4002db502983fbd056fdf416941d83e15ecb68ee9eeb4978cb2370c',\n            consumer_secret='29dbc46056c530814c2debcf24c76ff42f6cc66d0e3e5cfdef1e166725c6f',\n            base_url='http://wbsapi.withings.net/notify',\n            request_token_url='https://oauth.withings.com/account/request_token',\n            authorize_url='http://oauth.withings.com/account/authorize',\n            access_token_url='https://oauth.withings.com/account/access_token')\n    \n    request_token, request_token_secret = withings.get_request_token()\n    \n    callback = 'https://github.com/litl/rauth'\n    \n    authorize_url = withings.get_authorize_url(request_token,\n                                               oauth_callback=callback)\n    \n    print('Visit this URL in your browser: {url}'.format(url=authorize_url))\n    userid = raw_input('Enter userid from browser URL: ')\n    \n    sess = withings.get_auth_session(request_token,\n                                     request_token_secret,\n                                     params={'userid': userid})\n    \n    print sess.get('measure', params={'action': 'getmeas',\n                                      'userid': userid}).json()\n    \n\n[Share](https://stackoverflow.com/a/17799394 \"Short permalink to this answer\")\n\nShare a link to this answer\n\nCopy link[CC BY-SA 3.0](https://creativecommons.org/licenses/by-sa/3.0/ \"The current license for this post: CC BY-SA 3.0\")\n\n[Improve this answer](https://stackoverflow.com/posts/17799394/edit)\n\nFollow \n\nFollow this answer to receive notifications\n\nanswered Jul 22, 2013 at 23:59\n\n[![maxcountryman's user avatar](https://i.sstatic.net/sq0X6.png?s=64)](https://stackoverflow.com/users/1542038/maxcountryman)\n\n[maxcountryman](https://stackoverflow.com/users/1542038/maxcountryman)\nmaxcountryman\n\n1,76955 gold badges2525 silver badges5555 bronze badges\n\n[Add a comment](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity# \"Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”.\")\n  | [](https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity# \"Expand to show all comments on this post\")\n\n  \n\nYour Answer\n-----------\n\n**Reminder:** Answers generated by artificial intelligence tools are not allowed on Stack Overflow. [Learn more](https://stackoverflow.com/help/gen-ai-policy)\n\nDraft saved\n\nDraft discarded\n\n \n\n### Sign up or [log in](https://stackoverflow.com/users/login?ssrc=question_page&returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f17788445%2fconstructing-requests-with-url-query-string-in-python%23new-answer)\n\nSign up using Google\n\nSign up using Email and Password\n\n  Submit\n\n### Post as a guest\n\nName\n\nEmail\n\nRequired, but never shown\n\nPost Your Answer Discard\n\nBy clicking “Post Your Answer”, you agree to our [terms of service](https://stackoverflow.com/legal/terms-of-service/public)\n and acknowledge you have read our [privacy policy](https://stackoverflow.com/legal/privacy-policy)\n.\n\nNot the answer you're looking for? Browse other questions tagged\n\n*   [python](https://stackoverflow.com/questions/tagged/python \"show questions tagged 'python'\")\n    \n*   [api](https://stackoverflow.com/questions/tagged/api \"show questions tagged 'api'\")\n    \n*   [oauth](https://stackoverflow.com/questions/tagged/oauth \"show questions tagged 'oauth'\")\n    \n*   [request](https://stackoverflow.com/questions/tagged/request \"show questions tagged 'request'\")\n    \n\nor [ask your own question](https://stackoverflow.com/questions/ask)\n.\n\n\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nlang-py","metadata":{"language":"en","favicon":"https://cdn.sstatic.net/Sites/stackoverflow/Img/favicon.ico?v=ec617d715196","ogImage":"https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded","twitter:card":"summary","twitter:description":"I'm not really sure what I'm doing. Should I be using a library for this? Or do it manually?\n\nSo I'm trying to do some work with the WiThings (http://www.withings.com/api) API in Python.\n\nIn order to ","ogDescription":"I'm not really sure what I'm doing. Should I be using a library for this? Or do it manually?\n\nSo I'm trying to do some work with the WiThings (http://www.withings.com/api) API in Python.\n\nIn order to ","ogSiteName":"Stack Overflow","twitter:title":"Constructing requests with URL Query String in Python","og:image":"https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded","title":"api - Constructing requests with URL Query String in Python - Stack Overflow","twitter:domain":"stackoverflow.com","og:url":"https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python","ogUrl":"https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python","og:type":"website","ogTitle":"Constructing requests with URL Query String in Python","viewport":"width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0","og:site_name":"Stack Overflow","scrapeId":"9af763fc-9e33-4fdf-b259-60aa70508350","sourceURL":"https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity","url":"https://stackoverflow.com/questions/17788445/constructing-requests-with-url-query-string-in-python?lastactivity","statusCode":200}}]}